{% extends 'base.html' %}

{% block title %}Admin Dashboard{% endblock %}

{% block sidebar %}
<a href="{% url 'admin_dashboard' %}" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
<a href="{% url 'student_list' %}"><i class="fas fa-user-graduate"></i> Students</a>
<a href="/admin"><i class="fas fa-cog"></i> Admin Panel</a>
<a href="{% url 'announcement_create' %}"><i class="fas fa-bullhorn"></i> Announcements</a>
{% endblock %}

{% block content %}
<h1 class="mb-4"><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h1>

<div class="row mb-4">
    <div class="col-md-3">
        <div class="card stat-card" style="border-left: 4px solid #3498db;">
            <i class="fas fa-user-graduate" style="color: #3498db;"></i>
            <h3>{{ total_students }}</h3>
            <p class="text-muted mb-0">Total Students</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card stat-card" style="border-left: 4px solid #2ecc71;">
            <i class="fas fa-chalkboard-teacher" style="color: #2ecc71;"></i>
            <h3>{{ total_teachers }}</h3>
            <p class="text-muted mb-0">Total Teachers</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card stat-card" style="border-left: 4px solid #f39c12;">
            <i class="fas fa-book" style="color: #f39c12;"></i>
            <h3>{{ total_classes }}</h3>
            <p class="text-muted mb-0">Total Classes</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card stat-card" style="border-left: 4px solid #e74c3c;">
            <i class="fas fa-book-open" style="color: #e74c3c;"></i>
            <h3>{{ total_subjects }}</h3>
            <p class="text-muted mb-0">Total Subjects</p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-users"></i> Recent Students</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Class</th>
                                <th>Admission Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for student in recent_students %}
                            <tr>
                                <td>{{ student.user.get_full_name }}</td>
                                <td>{{ student.class_enrolled }}</td>
                                <td>{{ student.admission_date|date:"M d, Y" }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">No students yet</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-bullhorn"></i> Recent Announcements</h5>
            </div>
            <div class="card-body">
                {% for announcement in announcements %}
                <div class="mb-3 pb-3 border-bottom">
                    <h6 class="mb-1">{{ announcement.title }}</h6>
                    <p class="text-muted small mb-1">{{ announcement.content|truncatewords:20 }}</p>
                    <small class="text-muted">
                        <i class="fas fa-clock"></i> {{ announcement.created_at|date:"M d, Y" }}
                    </small>
                </div>
                {% empty %}
                <p class="text-center text-muted">No announcements yet</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}