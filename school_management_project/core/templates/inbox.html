{% extends 'base.html' %}
{% block title %}Inbox{% endblock %}
{% block content %}
<h1 class="mb-4">Messages</h1>

<ul class="nav nav-tabs mb-3" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#received">Received</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#sent">Sent</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade show active" id="received">
        <div class="card">
            <div class="card-body">
                {% for message in received_messages %}
                <div class="mb-3 pb-3 border-bottom">
                    <h6>{{ message.subject }}</h6>
                    <p class="text-muted">From: {{ message.sender.get_full_name }}</p>
                    <p>{{ message.content|truncatewords:20 }}</p>
                    <small class="text-muted">{{ message.sent_at|date:"M d, Y H:i" }}</small>
                </div>
                {% empty %}
                <p class="text-center text-muted">No messages</p>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <div class="tab-pane fade" id="sent">
        <div class="card">
            <div class="card-body">
                {% for message in sent_messages %}
                <div class="mb-3 pb-3 border-bottom">
                    <h6>{{ message.subject }}</h6>
                    <p class="text-muted">To: {{ message.receiver.get_full_name }}</p>
                    <p>{{ message.content|truncatewords:20 }}</p>
                    <small class="text-muted">{{ message.sent_at|date:"M d, Y H:i" }}</small>
                </div>
                {% empty %}
                <p class="text-center text-muted">No sent messages</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}